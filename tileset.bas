DIM tile1%(256), chr%(256), chrmsk%(256)
DIM map(21, 15)
LET chrx = 10
LET chry = 10
SCREEN 13
FOR y = 1 TO 13
FOR x = 1 TO 15
READ tile1%
PSET (x, y), tile1%
NEXT: NEXT
GET (1, 1)-(15, 13), tile1%

FOR y = 1 TO 15
FOR x = 1 TO 21
READ map(x, y)
NEXT: NEXT

FOR y = 1 TO 13
FOR x = 1 TO 15
READ chr%
PSET (x, y), chr%
NEXT: NEXT
GET (1, 1)-(15, 13), chr%

FOR y = 1 TO 13
FOR x = 1 TO 15
READ chrmsk%
PSET (x, y), chrmsk%
NEXT: NEXT
GET (1, 1)-(15, 13), chrmsk%

FOR y = 1 TO 15
FOR x = 1 TO 21
IF map(x, y) = 1 THEN PUT (x * 15 - 15, y * 13 - 13), tile1%
NEXT: NEXT

PUT (chrx * 15 - 15, chry * 13 - 13), chrmsk%, AND
PUT (chrx * 15 - 15, chry * 13 - 13), chr%, XOR


DO
press$ = INKEY$
IF press$ = CHR$(0) + CHR$(77) AND chrx < 21 THEN chrx = chrx + 1
IF press$ = CHR$(0) + CHR$(75) AND chrx > 1 THEN chrx = chrx - 1
IF press$ = CHR$(0) + CHR$(72) AND chry > 1 THEN chry = chry - 1
IF press$ = CHR$(0) + CHR$(80) AND chry < 15 THEN chry = chry + 1

IF oldchrx <> chrx OR oldchry <> chry THEN
oldchrx = chrx
oldchry = chry

FOR y = 1 TO 15
FOR x = 1 TO 21

IF map(x, y) = 1 THEN PUT (x * 15 - 15, y * 13 - 13), tile1%, PSET
NEXT: NEXT

PUT (chrx * 15 - 15, chry * 13 - 13), chrmsk%, AND
PUT (chrx * 15 - 15, chry * 13 - 13), chr%, XOR
END IF

LOOP UNTIL press$ = CHR$(27)

DATA 2,6,2,2,2,2,2,2,2,2,2,2,2,2,2
DATA 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
DATA 2,6,2,2,2,6,6,2,2,2,2,2,2,2,2
DATA 2,2,2,2,2,2,6,2,2,2,2,2,2,2,2
DATA 2,2,6,2,2,2,2,2,2,6,6,2,2,2,2
DATA 2,2,2,2,2,2,2,2,2,6,2,2,2,2,2
DATA 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
DATA 2,2,2,6,2,2,2,2,2,2,2,2,2,2,2
DATA 2,2,2,2,2,2,2,2,6,2,2,2,2,2,2
DATA 2,2,2,2,2,2,2,2,6,2,2,2,2,2,2
DATA 2,6,2,2,2,2,2,2,2,2,2,2,2,6,2
DATA 2,2,2,2,2,2,2,6,2,2,2,2,2,2,2
DATA 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2

DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1

DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1


DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
